<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="Board">

	<select id="BoardAll" parameterType="hashmap" resultType="boardBean">
		SELECT * FROM TBL_BOARD
	</select>
	
	<select id="ListAll" parameterType="hashmap" resultType="listBean">
		SELECT * FROM TBL_LIST
	</select>
	
	<select id="boardList" parameterType="hashmap" resultType="listBean">
		SELECT * FROM TBL_LIST a 
		JOIN TBL_MEMBER b 
		ON a.USERNUM = b.USERNUM
	</select>
	
	<select id="adminList" parameterType="hashmap" resultType="listBean">
		SELECT * FROM TBL_LIST WHERE listnum = ${listnum}
	</select>
	
	<select id="BoardListAll" parameterType="hashmap" resultType="listBean">
		SELECT a.LISTNUM, b.USERID, a.LISTTITLE,a.LISTDATE,a.READCNT,a.LISTCONTENTS
		FROM TBL_LIST a  
		INNER JOIN TBL_MEMBER b 
		ON a.USERNUM = b.USERNUM  
		WHERE a.BOARDNUM = #{category} AND
		a.LISTNUM BETWEEN ${startRow} AND ${endRow}
	</select>
	
	<select id="BoardSeq" resultType="_int">
		SELECT BOARDSEQ.CURRVAL FROM DUAL
	</select>
	
	<select id="BoardCnt" resultType="_int">
		SELECT COUNT(*) FROM TBL_LIST
	</select>
	
	<insert id="insertBoard" parameterType="BoardBean">
		INSERT INTO TBL_BOARD VALUES
		(BOARDSEQ.NEXTVAL,#{boardname})
	</insert>
	
	<insert id="insertList" parameterType="listbean">
		INSERT INTO TBL_LIST (listnum, listtitle, listcontents, usernum,listdate,readcnt)
		VALUES(LISTSEQ.NEXTVAL,#{listtitle},#{listcontents},#{usernum},SYSDATE,0)
	</insert>
	
	<delete id="deleteBoard" parameterType="_int">
		DELETE FROM TBL_BOARD WHERE boardnum = ${boardnum}
	</delete>
	
	<delete id="deleteList" parameterType="_int">
		DELETE FROM TBL_LIST WHERE listnum = ${listnum}
	</delete>
	
	<update id="modifyBoard" parameterType="hashmap">
		UPDATE TBL_BOARD 
		SET boardname = #{boardname} 
		WHERE boardnum = ${boardnum}
	</update>
	
	<update id="modifyList" parameterType="hashmap">
		UPDATE TBL_LIST 
		SET listtitle = #{listtitle},
		listcontents = #{listcontents} 
		WHERE listnum = ${listnum}
	</update>
	
</mapper>
